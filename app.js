"use strict";var express=require("express");var https=require("https");var harp=require("harp");var app=express();app.set("view engine","ejs");app.use(express["static"](__dirname+"/public"));app.use(harp.mount(__dirname+"/public"));app.get("/",function(req,res){var doviz=[];var altin=[];new Promise(function(resolve,reject){https.get("https://ozankur.com/dovizpagedatabackup.php",function(response){var data=[];response.on("data",function(d){data.push(d)});response.on("end",function(){var parsed=JSON.parse(Buffer.concat(data).toString()).data;var currencies=Object.keys(parsed);for(var i=0;i<currencies.length;i++){if(Object.values(parsed)[i].code=="EUR"||Object.values(parsed)[i].code=="USD"){var obj={birim:Object.values(parsed)[i].code,alis:Object.values(parsed)[i].alis,satis:Object.values(parsed)[i].satis};doviz.push(obj);resolve("Ba\u015Far\u0131l\u0131")}}})});https.get("https://ozankur.com/goldpagedatabackup.php",function(response){var data=[];response.on("data",function(d){data.push(d)});response.on("end",function(){var parsed=JSON.parse(Buffer.concat(data).toString()).data;var currencies=Object.keys(parsed);for(var i=0;i<currencies.length;i++){if(Object.values(parsed)[i].code=="22 HURDA"||Object.values(parsed)[i].code=="995 HAS"){var obj={birim:Object.values(parsed)[i].code,alis:Object.values(parsed)[i].alis,satis:Object.values(parsed)[i].satis};altin.push(obj)}}})})}).then(function(){setTimeout(function(){res.status(200).render("index",{doviz:doviz,altin:altin})},10)})});app.get("/doviz",function(req,res){https.get("https://ozankur.com/dovizpagedatabackup.php",function(response){var data=[];response.on("data",function(d){data.push(d)});response.on("end",function(){var parsed=JSON.parse(Buffer.concat(data).toString()).data;var currencies=Object.keys(parsed);var values=[];for(var i=0;i<currencies.length;i++){if(Object.values(parsed)[i].code=="EUR/USD"||Object.values(parsed)[i].code=="GBP/USD")continue;var obj={birim:Object.values(parsed)[i].code,alis:Object.values(parsed)[i].alis,satis:Object.values(parsed)[i].satis};values.push(obj)}res.status(200).render("doviz",{values:values})})})});app.get("/altin",function(req,res){https.get("https://ozankur.com/goldpagedatabackup.php",function(response){var data=[];response.on("data",function(d){data.push(d)});response.on("end",function(){var parsed=JSON.parse(Buffer.concat(data).toString()).data;var currencies=Object.keys(parsed);var values=[];for(var i=0;i<currencies.length;i++){if(Object.values(parsed)[i].code=="G\xDCM\xDC\u015E K\xDCL\xC7E"){continue}var obj={birim:Object.values(parsed)[i].code,alis:Object.values(parsed)[i].alis,satis:Object.values(parsed)[i].satis};values.push(obj)}res.status(200).render("altin",{values:values})})})});var PORT=process.env.PORT||80;app.listen(PORT,function(err){if(err)console.log(err);else console.log("Server started on port ".concat(PORT))});